<!doctype html><meta charset="utf-8">
<title>Teste de Login (prompt)</title>
<script type="module">
import { firebaseConfig } from "./config.js";
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

const friendly = (code) => {
  switch(code){
    case "auth/invalid-email": return "E-mail inválido.";
    case "auth/user-not-found": return "Usuário não existe (crie no Firebase → Authentication → Usuários).";
    case "auth/wrong-password": return "Senha incorreta.";
    case "auth/too-many-requests": return "Muitas tentativas. Tente mais tarde.";
    case "auth/network-request-failed": return "Sem internet / rede bloqueada.";
    case "auth/operation-not-allowed": return "E-mail/Senha desativado (ative em Authentication → Método de login).";
    case "auth/unauthorized-domain": return "Domínio não autorizado (adicione em Authentication → Configurações → Domínios autorizados).";
    case "auth/invalid-api-key":
    case "auth/configuration-not-found": return "Configuração inválida (confira o arquivo config.js).";
    default: return "Não foi possível entrar. Verifique e-mail/senha e as configurações no Firebase.";
  }
};

async function test(){
  const email = prompt("E-mail:")?.trim();
  const pass  = prompt("Senha:");
  if(!email || !pass){
    document.body.innerHTML = "<h1>ERRO</h1><p>Preencha e-mail e senha.</p>";
    return;
  }
  try{
    const r = await signInWithEmailAndPassword(auth, email, pass);
    document.body.innerHTML = "<h1>OK!</h1><p>"+r.user.email+"</p>";
  }catch(e){
    document.body.innerHTML = "<h1>ERRO</h1><p>"+friendly(e.code)+"</p><p><small>Código: <code>"+(e.code||e)+"</code></small></p>";
    console.log(e);
  }
}
test();
</script>