:root{
  --font-body: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
  --font-size-base: clamp(16px, 2.2vw + 10px, 19px);
  --font-size-sm:   clamp(14px, 1.8vw + 8px, 17px);
  --font-size-lg:   clamp(18px, 2.6vw + 12px, 22px);
  --line: 1.6;
  --h1: clamp(22px, 3.5vw + 14px, 32px);
  --h2: clamp(20px, 3.0vw + 12px, 28px);
  --h3: clamp(18px, 2.6vw + 10px, 24px);
  --tap: 48px;

  --bg: #ffffff; --surface: #f7f9fb; --card: #ffffff;
  --text: #111111; --muted: #5b6773;
  --primary: #0B74B8; --primary-dark: #095a8d;
  --danger: #d94b4b; --chip: rgba(11,116,184,.10);
}
html { font-size: var(--font-size-base); }
body { margin:0; font-family: var(--font-body); line-height: var(--line); background: var(--bg); color: var(--text); }
img { max-width:100%; display:block; }
h1{font-size:var(--h1)} h2{font-size:var(--h2)} h3{font-size:var(--h3)}
.visually-hidden{position:absolute!important;clip:rect(1px,1px,1px,1px);padding:0;border:0;height:1px;width:1px;overflow:hidden}
.center{ text-align:center } .tiny{ font-size:.9rem }

/* Topbar */
.topbar{ position:sticky; top:0; z-index:10; background: var(--primary); color:#fff; }
.topbar .brand{ display:flex; align-items:center; gap:.6rem; padding:.8rem 1rem; font-weight:700; }
.topbar .actions{ display:flex; align-items:center; gap:.6rem; padding:.6rem 1rem .8rem 1rem; flex-wrap:wrap; }
.user{ margin-left:auto; }

/* Botões e inputs */
.btn{ border:1px solid rgba(0,0,0,.08); background:#fff; color:#1b1f23; padding:.75rem 1rem; border-radius:14px; min-height:var(--tap); cursor:pointer; }
.btn.primary{ background: var(--primary); border-color: var(--primary); color:#fff; font-weight:600; }
.btn.primary:hover{ background: var(--primary-dark); border-color: var(--primary-dark); }
.btn.ghost{ background:#e9f2f9; color:#083b5d; border-color: #d3e6f5; }
.btn.link{ border:none; background:transparent; text-decoration:underline; color:#0b74b8; }
.btn.danger{ background: var(--danger); border-color: var(--danger); color:#fff; }

input, select, textarea{
  width:100%; color:var(--text); background:#fff; border:1px solid #dfe3e7;
  padding:.75rem .875rem; border-radius:12px;
}
label{ display:grid; gap:.4rem; }

.toast{ position:fixed; bottom:1rem; left:50%; transform:translateX(-50%);
  background:#0f2232; color:#fff; padding:.6rem 1rem; border-radius:10px; box-shadow:0 8px 30px rgba(0,0,0,.3);
}
.errbox{ position:fixed; bottom:4.2rem; left:50%; transform:translateX(-50%); background:#3b1b1b; color:#ffd6d6; padding:.6rem 1rem; border-radius:10px; }

/* Layout */
.container{ max-width:1100px; margin:0 auto; padding:1rem; }
.card{ background:var(--card); border:1px solid #e7ebef; border-radius:18px; padding:1rem; box-shadow: 0 8px 20px rgba(0,0,0,.04); }
.max-480{ max-width:480px; margin: 2rem auto; }
.center-v{ margin-top:12vh; }

.metrics{ display:grid; grid-template-columns:repeat(3,1fr); gap:16px; margin:1rem 0; }
.metric-card{ background:#fff; border:1px solid #e7ebef; border-radius:18px; padding:1rem; display:grid; gap:.2rem; text-align:center; }
.metric-k{ color:var(--muted); font-size:.95rem; }
.metric-v{ font-weight:800; font-size:var(--font-size-lg); }

/* Calendário */
.calendar{ margin:1rem 0; }
.cal-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:.6rem; }
.cal-title{ font-weight:800; }
.cal-grid{ display:grid; grid-template-columns:repeat(7,1fr); grid-auto-rows:auto; gap:10px; }
.cal-dow{ text-align:center; color:var(--muted); font-weight:600; }
.cal-cell{ background:#fff; border:1px solid #e7ebef; border-radius:14px; }
.cal-hit{ width:100%; border:none; background:transparent; color:inherit; border-radius:14px; padding:.5rem; min-height:64px; cursor:pointer; display:grid; place-items:center; }
.cal-date{ font-size:1.1rem; font-weight:700; }
.cal-out{ opacity:.45 }
.cal-today{ outline:2px solid var(--primary); outline-offset:2px; }
.cal-hit.hasEvent::after{ content:""; width:10px; height:10px; border-radius:50%; background:var(--primary); display:inline-block; margin-top:.35rem; }
.cal-legend{ display:flex; gap:1.2rem; align-items:center; color:var(--muted); margin-top:.6rem; }
.dot{ width:.8rem; height:.8rem; border-radius:50%; display:inline-block; margin:0 .4rem 0 .8rem; }
.dot-has{ background:var(--primary); } .dot-today{ background:#0B74B8; opacity:.5; }

/* Cards / tabela */
.cards{ display:grid; gap:20px; margin:1rem 0; }
.party-card{ background:#fff; border:1px solid #e7ebef; border-radius:18px; padding:14px; display:grid; gap:.6rem; }
.party-head{ display:flex; justify-content:space-between; align-items:center; gap:10px; font-weight:700; }
.badge{ background:#0b74b8; color:#fff; padding:.3rem .6rem; border-radius:999px; font-size:.9rem; }
.kv{ display:flex; justify-content:space-between; gap:10px; color:var(--muted); }
.mats{ display:flex; flex-wrap:wrap; gap:.5rem; }
.chip{ background:var(--chip); padding:.35rem .55rem; border-radius:999px; font-size:.95rem; color:#0b74b8; }
.row-actions{ display:flex; flex-wrap:wrap; gap:.6rem; }

.table-wrapper{ margin:1rem 0; overflow:auto; border-radius:14px; }
.table{ width:100%; border-collapse:collapse; }
.table th, .table td{ text-align:left; padding:.8rem .9rem; border-bottom:1px solid #e7ebef; white-space:nowrap; }

/* Dialog */
dialog{ border:none; border-radius:18px; max-width:720px; width:96%; padding:0; background:#fff; color: var(--text); }
dialog::backdrop{ background:rgba(0,0,0,.6); }
.dialog-header{ padding:1rem 1rem 0 1rem; }
dialog .form{ padding:1rem; display:grid; gap:1rem; }
.grid.two{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
.grid.five{ display:grid; grid-template-columns:repeat(5,1fr); gap:10px; }
.dialog-actions{ display:flex; gap:.6rem; justify-content:flex-end; padding:0 1rem 1rem; }
.materials legend{ color:var(--muted); }

/* Hero */
.hero{ margin:1rem 0; display:flex; justify-content:center; }
.hero img{ width:200px; opacity:.95; }

/* FAB */
.fab{ position:fixed; right:16px; bottom:16px; background:#0B74B8; color:#fff; border:none; border-radius:999px; width:64px; height:64px; font-size:2rem; box-shadow:0 10px 30px rgba(0,0,0,.2); }

/* A11y */
:focus-visible{ outline:3px solid #0B74B8; outline-offset:2px; }
@media (prefers-reduced-motion: reduce){
  *{ animation:none!important; transition:none!important; }
}

/* Mobile */
@media (max-width: 900px){
  .table-wrapper{ display:none; }
}
@media (max-width: 768px){
  .row-actions{ display:grid; grid-template-columns:1fr 1fr; gap:10px; }
  .row-actions .btn[data-act="dup"],
  .row-actions .btn[data-act="ics"]{ display:none; }
  .grid.two{ grid-template-columns:1fr; }
  .grid.five{ grid-template-columns:repeat(2,1fr); }
  .filters{ grid-template-columns:1fr; }
}

/* Filtros */
.filters{ display:grid; grid-template-columns:1fr 1fr auto auto; gap:10px; }

/* Footer */
.footer{ color:#5b6773; text-align:center; padding:2rem 1rem 4rem; }

/* HOTFIX MOBILE & OVERFLOW */
*,
*::before,
*::after { box-sizing: border-box; }
html, body { width: 100%; max-width: 100%; overflow-x: hidden; }
.topbar .actions { flex-wrap: wrap; row-gap: .4rem; }
.brand { min-width: 0; overflow: hidden; text-overflow: ellipsis; }
.container { padding-inline: clamp(10px, 3vw, 16px); }
.card { overflow: hidden; }
.cal-grid { grid-template-columns: repeat(7, minmax(0, 1fr)); }
.cal-hit { min-height: 56px; padding: .55rem; }
.cal-date { line-height: 1; }
.hero img { max-width: 200px; }
@media (max-width: 480px){ .hero img { max-width: 140px; } }
.row-actions .btn { min-width: min(44vw, 240px); }
.user { max-width: 42ch; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }